# laravel env

### 环境配置
1. 在一个新的laravel项目中，在根目录会有一个```.env.example```文件(如果是通过composer
安装的，那么文件名会自动被重命名成为```.env```)，否则需要自己将其重命名

2. ```.env```文件不要上传到源代码管理工具中，因为每个开发机器都有自己不同的环境变量。

3. 如果是在团队中开发，那么在项目中要添加一个`.env.example`文件，将相关的键值存放在example文件中，
其他人就能从其中知道如果要运行你的程序，需要哪些环境变量配置。你可能还需要一个`.env.testing`文件用来
表示在测试的时候需要用到的环境。这个文件会覆盖`.env`文件，当运行PHPUnit和执行Artisan命令带上`--env=testing`
选项。
4. 所有的`.env`文件中的变量都会被转换成字符串。如果你定义的环境变量的值包含空格，你可能要将值用双引号包起来
5. 所有这些变量都会被加载到`$_ENV`这个超级全局变量中，当你的应用接受到一个请求。然而，你可能要用`env()`去重新
加载配置文件中的值。
6.　当前应用环境是通过`.env`文件中的`APP_ENV`变量，你可以访问这个值通过`APP::environment()`方法
7.　获取配置文件中的值，可以通过`config()`方法在应用中的任何地方访问到。配置的值可以同`.`的语法来获取，也就是
`filename.option`这样获取，同时也可以设置默认值如果那个option不存在。
### 配置缓存
- 为了加速项目的启动，你应该将你的所有配置文件通过`config.cache`的Artisan命令缓存到一个单独的文件。这样的话这些配置
将会被加载的更快。
- 你可能需要将运行`php artisan config:cache`命令当做你的生产环境的一部分，但是你不应该在本地使用这个，因为本地的环境
会频繁的变化。
### 维护模式(Maintenance　Mode)
当你的应用在维护模式时，所有的请求都会被转到一个自定义的视图展示。这可以很简单的去关闭应用当你在更新和进行维护的时候。
维护模式检查被包含在一个默认的中间栈中，如果是处于维护模式，一个`MaintenanceModeException`异常会被抛出，并带有
错误码503。
- 开启维护模式使用 `php artisan down`　命令
- 你也可以提供`message`和`retry`　选项在开启维护模式。`message`值可以被展示或者打印在日志中,`retry`的值江北设置
为HTTP请求投中的`Retry-After`值。命令如下：
>`php artisan down --message="Upgrading Database" --retry=60`
- 甚至，也可以在维护模式是设置可以访问具体应用的ip地址：
>`php artisan down --allow=127.0.0.1 --allow=192.168.0.0/16`
- 关闭维护模式使用 `php artisan up`　命令